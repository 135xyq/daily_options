(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cba20d6"],{"1ace":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"product-add-container"},[r("el-steps",{attrs:{active:e.showWhichOne,"finish-status":"success","align-center":!0}},[r("el-step",{attrs:{title:"填写商品基本信息",icon:"el-icon-info"}}),r("el-step",{attrs:{title:"填写商品销售信息",icon:"el-icon-upload"}})],1),0===e.showWhichOne?r("div",{staticClass:"step"},[r("ProductBasicInfo",{attrs:{formData:e.formData},on:{cancelEdit:e.onHandleCancelEdit,next:e.onHandleNext}})],1):e._e(),1===e.showWhichOne?r("div",{staticClass:"step"},[r("ProductSaleInfo",{attrs:{formData:e.formData},on:{prev:e.onHandlePrev,next:e.onHandleNext}})],1):e._e()],1)},n=[],s=r("5530"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"product-basic-info-container"},[r("el-form",{ref:"formData",staticClass:"demo-ruleForm",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"商品标题",prop:"title"}},[r("el-col",[r("el-input",{model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1)],1),r("el-form-item",{attrs:{label:"商品描述",prop:"desc"}},[r("el-col",[r("el-input",{model:{value:e.formData.desc,callback:function(t){e.$set(e.formData,"desc",t)},expression:"formData.desc"}})],1)],1),r("el-form-item",{attrs:{label:"标签",prop:"tags"}},[r("el-checkbox-group",{model:{value:e.formData.tags,callback:function(t){e.$set(e.formData,"tags",t)},expression:"formData.tags"}},e._l(e.tags,(function(t){return r("el-checkbox-button",{key:t,attrs:{label:t,value:t}},[e._v(e._s(t))])})),1)],1),r("el-form-item",{attrs:{label:"商品类目",prop:"category"}},[r("el-select",{attrs:{placeholder:"请选择商品类目"},on:{change:e.handleChangeItems},model:{value:e.formData.category,callback:function(t){e.$set(e.formData,"category",t)},expression:"formData.category"}},e._l(e.totalCategoryList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"商品子类目",prop:"c_items"}},[r("el-select",{attrs:{placeholder:"请选择商品子类目",clearable:""},model:{value:e.formData.c_items,callback:function(t){e.$set(e.formData,"c_items",t)},expression:"formData.c_items"}},e._l(e.c_itemsList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",[r("el-button",{on:{click:e.cancel}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("下一步")])],1)],1)],1)},o=[],c=(r("d3b7"),r("159b"),r("c4c8")),u=["限时秒杀","包邮，最快次日达","包邮","24小时发货","最快次日达"],l={props:{formData:{type:Object,required:!0}},data:function(){return{rules:{title:[{required:!0,message:"请输入商品标题",trigger:"blur"}],desc:[{required:!1,message:"请选择活动区域",trigger:"blur"}],tags:[{required:!0,message:"请选择标签",trigger:"change"}],category:[{required:!0,message:"请选择标签",trigger:"change"}],c_items:[{required:!1,message:"请至少选择一个活动性质",trigger:"change"}]},totalCategoryList:[],c_itemsList:[],tags:u}},created:function(){var e=this;Object(c["d"])().then((function(t){e.totalCategoryList=t.data.data}))},methods:{handleChangeItems:function(e){var t=this;this.totalCategoryList.forEach((function(r){r.id===e&&(t.c_itemsList=r.c_items)}))},next:function(){var e=this;this.$refs["formData"].validate((function(t){if(!t)return!1;e.$emit("next",e.formData)}))},cancel:function(){this.$emit("cancelEdit")}}},p=l,m=r("2877"),f=Object(m["a"])(p,i,o,!1,null,"02de0c21",null),d=f.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"product-sale-info-container"},[r("el-form",{ref:"formData",staticClass:"demo-ruleForm",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"预售价格",prop:"price"}},[r("el-input-number",{attrs:{min:.1,label:"预售价格"},model:{value:e.formData.price,callback:function(t){e.$set(e.formData,"price",t)},expression:"formData.price"}})],1),r("el-form-item",{attrs:{label:"折扣价格",prop:"price_off"}},[r("el-input-number",{attrs:{min:.1,label:"折扣价格"},model:{value:e.formData.price_off,callback:function(t){e.$set(e.formData,"price_off",t)},expression:"formData.price_off"}})],1),r("el-form-item",{attrs:{label:"计量单位",prop:"unit"}},[r("el-select",{attrs:{placeholder:"请选择计量单位"},model:{value:e.formData.unit,callback:function(t){e.$set(e.formData,"unit",t)},expression:"formData.unit"}},e._l(e.productUnit,(function(e){return r("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})})),1)],1),r("el-form-item",{attrs:{label:"库存",prop:"inventory"}},[r("el-input-number",{attrs:{"step-strictly":!0,min:0,label:"库存"},model:{value:e.formData.inventory,callback:function(t){e.$set(e.formData,"inventory",t)},expression:"formData.inventory"}})],1),r("el-form-item",{attrs:{label:"商品相册",prop:"images"}},[r("el-upload",{attrs:{action:"https://mallapi.duyiedu.com/upload/images?appkey="+e.$store.state.user.appkey,"list-type":"picture-card","on-success":e.handleSuccess,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"file-list":e.fileList,name:"avatar"}},[r("i",{staticClass:"el-icon-plus"})]),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),r("el-form-item",{attrs:{label:"上架",prop:"status"}},[r("el-tooltip",{attrs:{content:e.getStatus,placement:"top"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.prev}},[e._v("上一页")]),r("el-button",{attrs:{type:"success"},on:{click:e.next}},[e._v("提交")])],1)],1)],1)},g=[],b=(r("d81d"),r("4de4"),[{name:"克",type:"g"},{name:"千克",type:"kg"},{name:"毫升",type:"ml"},{name:"升",type:"l"},{name:"吨",type:"t"}]),y={props:{formData:{type:Object,required:!0}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,productUnit:b,fileList:[],rules:{price:[{type:"number",required:!0,message:"请输入预售价格",trigger:"blur"}],price_off:[{type:"number",required:!0,message:"请输入折扣价格",trigger:"blur"}],unit:[{type:"string",required:!0,message:"请选择单位",trigger:"change"}],inventory:[{required:!0,message:"请择库存",trigger:"blur"}],images:[{required:!0,message:"请选择一张商品示例图",trigger:"change"}],status:[]}}},computed:{getStatus:function(){return 1===this.formData.status?"上架":"下架"}},created:function(){this.formData.images.length>0&&(this.fileList=this.formData.images.map((function(e,t){return{name:"images-".concat(t,".jpg"),url:e,status:"done"}})))},methods:{next:function(){var e=this;this.$refs["formData"].validate((function(t){if(!t)return!1;e.$emit("next",e.formData)}))},prev:function(){this.$emit("prev")},handleRemove:function(e,t){e.status="removed";var r=e.url;this.formData.images=this.formData.images.filter((function(e){return e!==r})),this.fileList=t,this.$message({type:"success",message:"删除成功！"})},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleSuccess:function(e,t,r){this.fileList.push(e.data),this.formData.images.push(t.response.data.url),this.fileList=r,this.$message({type:"success",message:"上传成功！"})}}},v=y,D=(r("87d7"),Object(m["a"])(v,h,g,!1,null,"8908e18e",null)),x=D.exports,w={data:function(){return{formData:{title:"",desc:"",category:"",c_items:[],tags:[],price:0,price_off:0,unit:"",inventory:0,status:1,images:[]},showWhichOne:0}},components:{ProductBasicInfo:d,ProductSaleInfo:x},created:function(){var e=this,t=this.$route.params.id;t&&Object(c["g"])(t).then((function(t){e.formData=t.data}))},methods:{onHandleNext:function(e){var t=this;this.formData=Object(s["a"])(Object(s["a"])({},this.formData),{},{form:e}),1===this.showWhichOne?this.$route.params.id?this.$confirm("此操作将改变商品信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["h"])(t.formData).then((function(e){"success"===e.status?(t.$message({type:"success",message:"更改成功!"}),t.$router.push({name:"productList"})):t.$message({type:"error",message:"更改失败!"})}))})).catch((function(){t.$message({type:"info",message:"已取消更改"})})):this.$confirm("确定要新增该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["e"])(t.formData).then((function(e){"success"===e.status?(t.$message({type:"success",message:"添加成功!"}),t.$router.push({name:"productList"})):t.$message({type:"danger",message:"添加失败!"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})})):this.showWhichOne=1},onHandlePrev:function(){this.showWhichOne=0},onHandleCancelEdit:function(){var e=this;this.$confirm("此操作将永久清空已填写内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"productList"}),e.$message({type:"success",message:"已清空输入内容!"})})).catch((function(){e.$message({type:"info",message:"请继续编辑"})}))}}},k=w,$=(r("d5e8"),Object(m["a"])(k,a,n,!1,null,"6179874c",null));t["default"]=$.exports},"87d7":function(e,t,r){"use strict";r("93f6")},"8ae8":function(e,t,r){},"93f6":function(e,t,r){},c4c8:function(e,t,r){"use strict";r.d(t,"d",(function(){return c})),r.d(t,"i",(function(){return l})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return g})),r.d(t,"e",(function(){return y})),r.d(t,"a",(function(){return D})),r.d(t,"c",(function(){return w})),r.d(t,"b",(function(){return $}));var a=r("5530"),n=r("1da1"),s=(r("96cf"),r("4360")),i=r("0c6d"),o=s["a"].state.user.appkey;function c(){return u.apply(this,arguments)}function u(){return u=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/category/all",{params:{appkey:o}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return p=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/products/all",{params:Object(a["a"])({appkey:o},t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function m(e){return f.apply(this,arguments)}function f(){return f=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].delete("/products/".concat(t),{params:{appkey:o}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function d(e){return h.apply(this,arguments)}function h(){return h=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/products/".concat(t),{params:{appkey:o}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return b=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].put("/products/edit",Object(a["a"])({appkey:o},t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function y(e){return v.apply(this,arguments)}function v(){return v=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/products/add",Object(a["a"])({appkey:o},t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function D(e){return x.apply(this,arguments)}function x(){return x=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/category/add",Object(a["a"])({appkey:o},t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return k=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].put("/category/edit",Object(a["a"])({appkey:o},t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function $(e){return _.apply(this,arguments)}function _(){return _=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].delete("/category/".concat(t),{params:{appkey:o}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}},d5e8:function(e,t,r){"use strict";r("8ae8")}}]);
//# sourceMappingURL=chunk-0cba20d6.b91f576e.js.map